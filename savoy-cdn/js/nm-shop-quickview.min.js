/* NM: Quick-view script */
(function(b){b.extend(b.nmTheme,{quickview_init:function(){var a=this,h=b("#nm-quickview"),d=b('<div id="nm-quickview-overlay" class="mfp-bg nm-mfp-fade-in"></div>'),e;if("1"==nm_wp_vars.quickviewLinks.link)a.$body.on("click",".nm-quickview-btn",function(c){c.preventDefault();k(this)});if("1"==nm_wp_vars.quickviewLinks.thumb)a.$body.on("click",".nm-shop-loop-thumbnail-link",function(c){c.preventDefault();k(this)});if("1"==nm_wp_vars.quickviewLinks.title)a.$body.on("click",".nm-shop-loop-title-link",
function(c){c.preventDefault();k(this)});var k=function(c){c=b(c);(e=(e=c.data("product-id"))?e:c.closest(".product").data("product-id"))?(a.$html.css("width","auto"),d.appendTo(a.$body),d.addClass("show mfp-ready nm-loader"),n()):console.log("NM: Error - _qvClick() - No product ID found")},n=function(){var c={product_id:e};if("undefined"!==typeof wc_add_to_cart_params)var m=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","nm_ajax_load_product");else m=nm_wp_vars.ajaxUrl,c.action=
"nm_ajax_load_product";window.nm_quickview_get_product=b.ajax({type:"POST",url:m,data:c,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){"object"===typeof window.nm_quickview_get_product&&window.nm_quickview_get_product.abort()},error:function(f,l,g){console.log("NM: AJAX error - _qvLoadProduct() - "+g);a.$html.css("width","");d.removeClass("mfp-ready mfp-removing").remove()},success:function(f){h.html(f);var l=h.children("#product-"+e),g=l.find("form.cart");f=b("#nm-quickview-slider").find("img");
var p=f.last();f.removeAttr("loading");p.one("load",function(){l.hasClass("product-variable")&&(g.wc_variation_form().find(".variations select:eq(0)").change(),a.singleProductVariationsInit(g),g.on("woocommerce_variation_select_change",function(){a.qvHasSlider&&a.$qvSlider.slick("slickGoTo",0,!1)}));a.quantityInputsBindButtons(b("#nm-qv-product-summary"));q()})}})},q=function(){b.magnificPopup.open({mainClass:"nm-mfp-quickview nm-mfp-fade-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',
removalDelay:180,items:{src:h,type:"inline"},callbacks:{open:function(){d.removeClass("nm-loader");a.qvHasSlider=!1;a.$qvSlider=b("#nm-quickview-slider");1<a.$qvSlider.children().length&&(a.qvHasSlider=!0,a.$qvSlider.slick({prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-right"></i></a>',dots:!1,infinite:!1,speed:350}));d.one("touchstart.qv",function(){b.magnificPopup.close()})},beforeClose:function(){d.addClass("mfp-removing")},
close:function(){a.$html.css("width","");d.removeClass("mfp-ready mfp-removing").remove()}}})}}});b.nmThemeExtensions.quickview=b.nmTheme.quickview_init})(jQuery);