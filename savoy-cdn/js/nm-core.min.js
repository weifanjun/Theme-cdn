/* NM: Core script */
(function(b){function x(){this.init()}b.nmThemeExtensions||(b.nmThemeExtensions={});x.prototype={init:function(){var a=this;a.classHeaderFixed="header-on-scroll";a.classMobileMenuOpen="mobile-menu-open";a.classSearchOpen="header-search-open";a.classWidgetPanelOpen="widget-panel-open";a.$window=b(window);a.$document=b(document);a.$html=b("html");a.$body=b("body");a.$pageIncludes=b("#nm-page-includes");a.$pageOverlay=b("#nm-page-overlay");a.$topBar=b("#nm-top-bar");a.$header=b("#nm-header");a.$headerPlaceholder=
b("#nm-header-placeholder");a.headerScrollTolerance=0;a.$mobileMenuBtn=b("#nm-mobile-menu-button");a.$mobileMenu=b("#nm-mobile-menu");a.$mobileMenuScroller=a.$mobileMenu.children(".nm-mobile-menu-scroll");a.$mobileMenuLi=a.$mobileMenu.find("ul li.menu-item");a.$widgetPanel=b("#nm-widget-panel");a.widgetPanelAnimSpeed=250;a.panelsAnimSpeed=200;a.$shopWrap=b("#nm-shop");a.isShop=a.$shopWrap.length?!0:!1;a.shopCustomSelect="0"!=nm_wp_vars.shopCustomSelect?!0:!1;a.searchEnabled="0"!==nm_wp_vars.shopSearch?
!0:!1;a.isChromium=!!window.chrome;if("0"!=nm_wp_vars.pageLoadTransition){a.isIos=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);if(!a.isIos)a.$window.on("beforeunload",function(d){b("#nm-page-load-overlay").addClass("nm-loader");a.$html.removeClass("nm-page-loaded")});"onpagehide"in window?window.addEventListener("pageshow",function(){setTimeout(function(){a.$html.addClass("nm-page-loaded")},150)},!1):setTimeout(function(){a.$html.addClass("nm-page-loaded")},150)}a.$body.removeClass("nm-preload");
a.isTouch=a.$html.hasClass("touch")?!0:!1;a.isTouch?"0"!=nm_wp_vars.touchHover&&a.$html.addClass("has-hover"):a.$html.addClass("has-hover");a.headerIsFixed=a.$body.hasClass("header-fixed")?!0:!1;a.$html.hasClass("no-touch")&&a.$html.hasClass("history")?(a.hasPushState=!0,window.history.replaceState({nmShop:!0},"",window.location.href)):a.hasPushState=!1;a.setScrollbarWidth();a.headerCheckPlaceholderHeight();a.headerIsFixed&&(a.headerSetScrollTolerance(),a.mobileMenuPrep());a.widgetPanelPrep();0<window.navigator.userAgent.indexOf("MSIE ")&&
a.$html.addClass("nm-old-ie");a.loadExtension();a.bind();a.initPageIncludes();a.$body.hasClass("nm-added-to-cart")&&(a.$body.removeClass("nm-added-to-cart"),a.$window.load(function(){a.$widgetPanel.length&&(a.widgetPanelShow(!0,!0),setTimeout(function(){a.widgetPanelCartHideLoader()},1E3))}))},loadExtension:function(){b.nmThemeExtensions.shop&&b.nmThemeExtensions.shop.call(this);this.searchEnabled&&b.nmThemeExtensions.search&&b.nmThemeExtensions.search.call(this);b.nmThemeExtensions.singleProduct&&
b.nmThemeExtensions.singleProduct.call(this);b.nmThemeExtensions.cart&&b.nmThemeExtensions.cart.call(this);b.nmThemeExtensions.checkout&&b.nmThemeExtensions.checkout.call(this);b.nmThemeExtensions.blog&&b.nmThemeExtensions.blog.call(this)},setScrollbarWidth:function(){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;";document.body.appendChild(a);this.scrollbarWidth=a.offsetWidth-a.clientWidth;document.body.removeChild(a)},
pageIsScrollable:function(){return document.body.scrollHeight>document.body.clientHeight},urlGetParameter:function(a){var d=decodeURIComponent(window.location.search.substring(1)).split("&"),e;for(e=0;e<d.length;e++){var k=d[e].split("=");if(k[0]===a)return void 0===k[1]?!0:k[1]}},updateUrlParameter:function(a,d,e){var k=a.indexOf("#"),n=-1===k?"":a.substr(k);a=-1===k?a:a.substr(0,k);k=new RegExp("([?&])"+d+"=.*?(&|$)","i");var m=-1!==a.indexOf("?")?"&":"?";a=a.match(k)?a.replace(k,"$1"+d+"="+e+"$2"):
a+m+d+"="+e;return a+n},setPushState:function(a){this.hasPushState&&window.history.pushState({nmShop:!0},"",a)},headerCheckPlaceholderHeight:function(){if(!this.$body.hasClass(this.classHeaderFixed)){var a=this.$header.innerHeight(),d=parseInt(this.$headerPlaceholder.css("height"));a!==d&&this.$headerPlaceholder.css("height",a+"px")}},headerSetScrollTolerance:function(){this.headerScrollTolerance=this.$topBar.length&&this.$topBar.is(":visible")?this.$topBar.outerHeight(!0):0},headerToggleFixedClass:function(a){a.$document.scrollTop()>
a.headerScrollTolerance?a.$body.hasClass(a.classHeaderFixed)||a.$body.addClass(a.classHeaderFixed):a.$body.hasClass(a.classHeaderFixed)&&a.$body.removeClass(a.classHeaderFixed)},bind:function(){var a=this,d=null;a.$window.resize(function(){d&&clearTimeout(d);d=setTimeout(function(){a.headerCheckPlaceholderHeight();a.headerIsFixed&&(a.headerSetScrollTolerance(),a.mobileMenuPrep())},250)});var e=window.matchMedia("(min-width: 992px)"),k=window.matchMedia("(max-width: 991px)");e.addListener(function(g){g.matches&&
a.$body.hasClass(a.classMobileMenuOpen)&&a.pageOverlayHide()});k.addListener(function(g){g.matches&&a.$body.hasClass(a.classSearchOpen)&&a.pageOverlayHide()});if(a.isTouch)a.$window.on("orientationchange",function(){a.$body.addClass("touch-orientation-change");setTimeout(function(){a.$body.removeClass("touch-orientation-change")},500)});a.headerIsFixed&&(a.$window.bind("scroll.nmheader",function(){a.headerToggleFixedClass(a)}),a.$window.trigger("scroll"));e=b("#nm-top-menu").children(".menu-item");
k=b("#nm-main-menu-ul").children(".menu-item");var n=b("#nm-right-menu-ul").children(".menu-item");b().add(e).add(k).add(n).mouseenter(function(){var g=b(this),f=g.children(".sub-menu");if(f.length){var h=a.$window.innerWidth(),p=f.offset().left,l=f.width();h-=p+l;0>h&&f.css("left",h-33+"px");g.hasClass("bridge-height-set")||(h=g.closest("nav"),h.length&&(g.addClass("bridge-height-set"),g=Math.ceil((h.height()-g.height())/2),f.children(".nm-sub-menu-bridge").css("height",g+1+"px")))}}).mouseleave(function(){var g=
b(this).children(".sub-menu");g.length&&g.css("left","")});if(!a.isShop)a.$header.on("click.nmHeaderShopRedirect",".shop-redirect-link",function(g){g.preventDefault();g=b(this).children("a").attr("href");window.location.href=g+"#shop"});a.$mobileMenuBtn.bind("click",function(g){g.preventDefault();a.$body.hasClass(a.classMobileMenuOpen)?a.mobileMenuClose(!0):a.mobileMenuOpen()});a.$mobileMenuLi.bind("click.nmMenuToggle",function(g){g.stopPropagation();var f=b(this),h=f.children("ul");!h.length||f.hasClass("nm-notoggle")&&
!b(g.target).hasClass("nm-menu-toggle")||(g.preventDefault(),f.toggleClass("active"),h.toggleClass("open"))});a.$widgetPanel.length&&a.widgetPanelBind();if(a.$pageIncludes.hasClass("login-popup")){var m=!1;b("#nm-menu-account-btn").bind("click.nmLoginShowPopup",function(g){g.preventDefault();b("#nm-login-wrap").children(".login").css("display","");b.magnificPopup.open({mainClass:"nm-login-popup nm-mfp-fade-in",alignTop:!0,closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,
items:{src:"#nm-login-popup-wrap",type:"inline"},callbacks:{open:function(){m||(m=!0,b.ajax({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","nm_ajax_login_get_nonces"),dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},success:function(f){b("#woocommerce-login-nonce").attr("value",f.login);b("#woocommerce-register-nonce").attr("value",f.register)}}))},close:function(){b("#nm-login-wrap").addClass("inline fade-in slide-up");b("#nm-register-wrap").removeClass("inline fade-in slide-up")}}})})}a.$pageOverlay.bind("click",
function(){a.pageOverlayHide()})},pageOverlayShow:function(){this.$body.hasClass(this.classMobileMenuOpen)?this.$pageOverlay.addClass("nm-mobile-menu-overlay"):this.$body.hasClass(this.classSearchOpen)?this.$pageOverlay.addClass("nm-header-search-overlay"):this.$body.hasClass(this.classWidgetPanelOpen)&&this.$pageOverlay.addClass("nm-widget-panel-overlay");this.$pageOverlay.addClass("show")},pageOverlayHide:function(){var a=this;a.$body.hasClass(a.classMobileMenuOpen)?a.mobileMenuClose(!1):a.$body.hasClass(a.classSearchOpen)?
a.headerSearchTogglePanel():a.$body.hasClass(a.classWidgetPanelOpen)&&a.widgetPanelHide();a.$body.trigger("nm_page_overlay_hide");a.$pageOverlay.addClass("fade-out");setTimeout(function(){a.$pageOverlay.removeClass()},a.panelsAnimSpeed)},mobileMenuPrep:function(){var a=this.$window.height()-this.$header.outerHeight(!0);this.$mobileMenuScroller.css({"max-height":a+"px","margin-right":"-"+this.scrollbarWidth+"px"})},mobileMenuOpen:function(a){a=this.$header.outerHeight(!0);this.$mobileMenuScroller.css("margin-top",
a+"px");this.$body.addClass(this.classMobileMenuOpen);this.pageOverlayShow()},mobileMenuClose:function(a){this.$body.removeClass(this.classMobileMenuOpen);a&&this.pageOverlayHide();setTimeout(function(){b("#nm-mobile-menu-main-ul").children(".active").removeClass("active").children("ul").removeClass("open");b("#nm-mobile-menu-secondary-ul").children(".active").removeClass("active").children("ul").removeClass("open")},250)},widgetPanelPrep:function(){var a=this;a.widgetPanelCartHideScrollbar();a.cartPanelAjax=
null;"0"!=nm_wp_vars.cartPanelQtyArrows&&(a.quantityInputsBindButtons(a.$widgetPanel),a.$widgetPanel.on("blur","input.qty",function(){var d=b(this),e=parseFloat(d.val()),k=parseFloat(d.attr("max"));if(""===e||"NaN"===e)e=0;"NaN"===k&&(k="");e>k&&(d.val(k),e=k);0<e&&a.widgetPanelCartUpdate(d)}),a.$document.on("nm_qty_change",function(d,e){a.$body.hasClass(a.classWidgetPanelOpen)&&a.widgetPanelCartUpdate(b(e))}))},widgetPanelBind:function(){var a=this;a.isTouch&&(a.$pageOverlay.on("touchmove",function(d){d.preventDefault()}),
a.$widgetPanel.on("touchmove",function(d){d.stopPropagation()}));b("#nm-menu-cart-btn, #nm-mobile-menu-cart-btn").bind("click.nmAtc",function(d){d.preventDefault();if(a.$body.hasClass(a.classMobileMenuOpen)){var e=b(this);a.pageOverlayHide();setTimeout(function(){e.trigger("click")},a.panelsAnimSpeed)}else a.widgetPanelShow()});b("#nm-widget-panel-close").bind("click.nmWidgetPanelClose",function(d){d.preventDefault();a.pageOverlayHide()});a.$widgetPanel.on("click.nmCartPanelClose","#nm-cart-panel-continue",
function(d){d.preventDefault();a.pageOverlayHide()})},widgetPanelShow:function(a,d){var e=this;d&&"0"==nm_wp_vars.cartPanelShowOnAtc?e.shopShowNotices():(a&&e.widgetPanelCartShowLoader(),e.$body.addClass("widget-panel-opening "+e.classWidgetPanelOpen),e.pageOverlayShow(),setTimeout(function(){e.$body.removeClass("widget-panel-opening")},e.widgetPanelAnimSpeed))},widgetPanelHide:function(){var a=this;a.$body.addClass("widget-panel-closing");a.$body.removeClass(a.classWidgetPanelOpen);setTimeout(function(){a.$body.removeClass("widget-panel-closing")},
a.widgetPanelAnimSpeed)},widgetPanelCartShowLoader:function(){b("#nm-cart-panel-loader").addClass("show")},widgetPanelCartHideLoader:function(){b("#nm-cart-panel-loader").addClass("fade-out");setTimeout(function(){b("#nm-cart-panel-loader").removeClass("fade-out show")},200)},widgetPanelCartHideScrollbar:function(){this.$widgetPanel.children(".nm-widget-panel-inner").css("marginRight","-"+this.scrollbarWidth+"px")},widgetPanelCartUpdate:function(a){var d=this;d.cartPanelAjax&&d.cartPanelAjax.abort();
a.closest("li").addClass("loading");var e=b("#nm-cart-panel-form"),k=e.find("#_wpnonce"),n={};k.length?(n.nm_cart_panel_update="1",n.update_cart="1",n[a.attr("name")]=a.val(),n._wpnonce=k.val(),d.cartPanelAjax=b.ajax({type:"POST",url:e.attr("action"),data:n,dataType:"html",error:function(m,g,f){console.log("NM: AJAX error - widgetPanelCartUpdate() - "+f);b("#nm-cart-panel .cart_list").children(".loading").removeClass("loading")},success:function(m){b(document.body).trigger("wc_fragment_refresh").trigger("updated_cart_totals")},
complete:function(){d.cartPanelAjax=null}})):console.log("NM - widgetPanelCartUpdate: Nonce field not found.")},shopReplaceFragments:function(a){var d;b.each(a,function(e,k){d=b(k);d.length&&b(e).replaceWith(d)})},quantityInputsBindButtons:function(a){var d=this,e,k=nm_wp_vars.cartPanelQtyThrottleTimeout;a.off("click.nmQty").on("click.nmQty",".nm-qty-plus, .nm-qty-minus",function(){e&&clearTimeout(e);var n=b(this),m=n.closest(".quantity").find(".qty"),g=parseFloat(m.val()),f=parseFloat(m.attr("max")),
h=parseFloat(m.attr("min")),p=m.attr("step");g&&""!==g&&"NaN"!==g||(g=0);if(""===f||"NaN"===f)f="";if(""===h||"NaN"===h)h=0;if("any"===p||""===p||void 0===p||"NaN"===parseFloat(p))p=1;n.hasClass("nm-qty-plus")?f&&(f==g||g>f)?m.val(f):(m.val(g+parseFloat(p)),e=setTimeout(function(){d.quantityInputsTriggerEvents(m)},k)):h&&(h==g||g<h)?m.val(h):0<g&&(m.val(g-parseFloat(p)),e=setTimeout(function(){d.quantityInputsTriggerEvents(m)},k))})},quantityInputsTriggerEvents:function(a){a.trigger("change");this.$document.trigger("nm_qty_change",
a)},initPageIncludes:function(){var a=this;if(a.$pageIncludes.hasClass("row-full-height")){var d=function(){var f=b(".nm-row-full-height:first");if(f.length){var h=a.$window.height(),p=f.offset().top,l;h>p&&(l=100-p/(h/100),f.css("min-height",l+"vh"))}};d();var e=null;a.$window.bind("resize.nmRow",function(){e&&clearTimeout(e);e=setTimeout(function(){d()},250)})}a.isTouch&&0==nm_wp_vars.rowVideoOnTouch||!a.$pageIncludes.hasClass("video-background")||b(".nm-row-video").each(function(){var f=b(this),
h=f.data("video-url");h&&(h=vcExtractYoutubeId(h))&&insertYoutubeVideoAsBackground(f,h)});a.$window.load(function(){if(a.$pageIncludes.hasClass("banner")){var f=b(".nm-banner");a.isShop&&a.filtersEnableAjax&&f.find(".nm-banner-shop-link").bind("click",function(c){c.preventDefault();b(this).attr("href")&&a.shopExternalGetPage(b(this).attr("href"))})}if(a.$pageIncludes.hasClass("banner-slider")){var h=function(c,r){if(c.slideIndex!=r){c.slideIndex=r;c.$bannerContent&&c.$bannerContent.removeClass(c.bannerAnimation);
var q=c.isSlick?c.find(".slick-track .slick-active"):c.children(".flickity-viewport").children(".flickity-slider").children(".is-selected");c.$bannerContent=q.find(".nm-banner-text-inner");c.$bannerContent.length&&(c.bannerAnimation=c.$bannerContent.data("animate"),c.$bannerContent.addClass(c.bannerAnimation))}},p=function(c,r){var q=r.children(".nm-banner");q.hasClass("alt-mobile-layout")?"absolute"!=q.children(".nm-banner-content").css("position")?c.addClass("alt-mobile-layout-showing"):c.removeClass("alt-mobile-layout-showing"):
c.removeClass("alt-mobile-layout-showing")};b(".nm-banner-slider").each(function(){var c=b(this);c.isSlick=c.hasClass("plugin-slick")?!0:!1;c.children().wrap('<div class="nm-banner-slide"></div>');if(c.isSlick){var r={arrows:!1,prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-thin-right"></i></a>',dots:!1,edgeFriction:0,infinite:!1,pauseOnHover:!1,speed:350,touchThreshold:30};r=b.extend(r,c.data());
c.on("init",function(){a.$document.trigger("banner-slider-loaded");h(c,0)});c.on("afterChange",function(u,t,v){h(c,v)});c.on("setPosition",function(u,t){var v=t.$slider,y=b(t.$slides[t.currentSlide]);p(v,y)});c.slick(r)}else{r=b.extend({},c.data("options"));c.one("select.flickity",function(){a.$document.trigger("banner-slider-loaded");h(c,0)});c.on("settle.flickity",function(){h(c,q.selectedIndex)});c.flickity(r);var q=c.data("flickity");c.on("select.flickity",function(){var u=b(this),t=q?b(q.selectedElement):
u.find(".is-selected");p(u,t)});c.trigger("select.flickity");if(c.hasClass("has-text-parallax")){var w=c.find(".nm-banner-text"),z;c.on("scroll.flickity",function(u,t){q.slides.forEach(function(v,y){z=1*(v.target+q.x)/3;w[y].style.transform="translate3d("+z+"px,0,0)"})})}}})}if(a.$pageIncludes.hasClass("product-slider")){f=b(".nm-product-slider");var l={adaptiveHeight:!0,arrows:!1,prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-thin-right"></i></a>',
dots:!0,edgeFriction:0,infinite:!1,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]};f.each(function(){var c=b(this),r=c.find(".nm-products:first");l=b.extend(l,c.data());c=c.data("slides-to-show-mobile");var q=2==parseInt(l.slidesToShow)?2:3,w=2<parseInt(c)?c:2;l.responsive[0].settings.slidesToShow=
q;l.responsive[0].settings.slidesToScroll=q;l.responsive[1].settings.slidesToShow=w;l.responsive[1].settings.slidesToScroll=w;l.responsive[2].settings.slidesToShow=c;l.responsive[2].settings.slidesToScroll=c;r.slick(l)})}a.$pageIncludes.hasClass("post-slider")&&(f=b(".nm-post-slider"),l={adaptiveHeight:!0,arrows:!1,prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-thin-right"></i></a>',dots:!0,edgeFriction:0,
infinite:!1,pauseOnHover:!1,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]},f.each(function(){var c=b(this);l=b.extend(l,c.data());2==l.slidesToShow&&(l.responsive[0].settings.slidesToShow=2,l.responsive[0].settings.slidesToScroll=2);c.slick(l)}));"0"!=nm_wp_vars.wpGalleryPopup&&a.$pageIncludes.hasClass("wp-gallery")&&
b(".gallery").each(function(){b(this).magnificPopup({mainClass:"nm-wp-gallery-popup nm-mfp-fade-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,delegate:".gallery-icon > a",type:"image",gallery:{enabled:!0,arrowMarkup:'<a title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir% nm-font nm-font-angle-right"></a>'},image:{titleSrc:function(c){return c.el.parent().next(".wp-caption-text").text()||""}},closeBtnInside:!1})})});if(a.$pageIncludes.hasClass("product_categories")){var k=
b(".nm-product-categories");a.isShop&&a.filtersEnableAjax&&k.find(".product-category a").bind("click",function(f){f.preventDefault();a.shopExternalGetPage(b(this).attr("href"))});a.$pageIncludes.hasClass("product_categories_masonry")&&a.$window.load(function(){for(var f=0;f<k.length;f++){var h=b(k[f]).children(".woocommerce").children("ul");h.masonry({itemSelector:".product-category",gutter:0,initLayout:!1});h.masonry("on","layoutComplete",function(){h.closest(".nm-product-categories").removeClass("nm-loader");
h.addClass("show")});h.masonry()}})}if(a.$pageIncludes.hasClass("lightbox")){var n,m,g;b(".nm-lightbox").each(function(){b(this).bind("click",function(f){f.preventDefault();f.stopPropagation();n=b(this);m=n.data("mfp-type");g={mainClass:"nm-wp-gallery-popup nm-mfp-zoom-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,type:m,closeBtnInside:!1,image:{titleSrc:"data-mfp-title"}};g.closeOnContentClick="inline"==m?!1:!0;n.magnificPopup(g).magnificPopup("open")})})}}};
b.nmTheme=x.prototype;b(document).ready(function(){new x})})(jQuery);